{"remainingRequest":"C:\\Users\\WIN10\\IdeaProjects\\newsfeeder\\webapp\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\WIN10\\IdeaProjects\\newsfeeder\\webapp\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\WIN10\\IdeaProjects\\newsfeeder\\webapp\\src\\auth\\services\\auth.service.js","dependencies":[{"path":"C:\\Users\\WIN10\\IdeaProjects\\newsfeeder\\webapp\\src\\auth\\services\\auth.service.js","mtime":1578739178218},{"path":"C:\\Users\\WIN10\\IdeaProjects\\newsfeeder\\webapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557703735755},{"path":"C:\\Users\\WIN10\\IdeaProjects\\newsfeeder\\webapp\\node_modules\\babel-loader\\lib\\index.js","mtime":1557703735405},{"path":"C:\\Users\\WIN10\\IdeaProjects\\newsfeeder\\webapp\\node_modules\\eslint-loader\\index.js","mtime":1557703738744}],"contextDependencies":[],"result":["import _Promise from \"C:\\\\Users\\\\WIN10\\\\IdeaProjects\\\\newsfeeder\\\\webapp\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\nimport _JSON$stringify from \"C:\\\\Users\\\\WIN10\\\\IdeaProjects\\\\newsfeeder\\\\webapp\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"C:\\\\Users\\\\WIN10\\\\IdeaProjects\\\\newsfeeder\\\\webapp\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\WIN10\\\\IdeaProjects\\\\newsfeeder\\\\webapp\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/createClass\";\nimport axios from 'axios';\nvar API_URL = 'http://localhost:8081/api/auth/';\n\nvar AuthService =\n/*#__PURE__*/\nfunction () {\n  function AuthService() {\n    _classCallCheck(this, AuthService);\n  }\n\n  _createClass(AuthService, [{\n    key: \"login\",\n    value: function login(user) {\n      return axios.post(API_URL + 'login', {\n        username: user.username,\n        password: user.password\n      }).then(this.handleResponse).then(function (response) {\n        if (response.data.accessToken) {\n          localStorage.setItem('user', _JSON$stringify(response.data));\n        }\n\n        return response.data;\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      localStorage.removeItem('user');\n    }\n  }, {\n    key: \"register\",\n    value: function register(user) {\n      return axios.post(API_URL + 'register', {\n        username: user.username,\n        email: user.email,\n        password: user.password\n      });\n    }\n  }, {\n    key: \"handleResponse\",\n    value: function handleResponse(response) {\n      if (response.status === 401) {\n        this.logout();\n        location.reload(true);\n        var error = response.data && response.data.message;\n        return _Promise.reject(error);\n      }\n\n      return _Promise.resolve(response);\n    }\n  }]);\n\n  return AuthService;\n}();\n\nexport default new AuthService();",{"version":3,"sources":["C:\\Users\\WIN10\\IdeaProjects\\newsfeeder\\webapp\\src\\auth\\services\\auth.service.js"],"names":["axios","API_URL","AuthService","user","post","username","password","then","handleResponse","response","data","accessToken","localStorage","setItem","removeItem","email","status","logout","location","reload","error","message","reject","resolve"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAMC,OAAO,GAAG,iCAAhB;;IAEMC,W;;;;;;;;;0BACIC,I,EAAM;AACR,aAAOH,KAAK,CACPI,IADE,CACGH,OAAO,GAAG,OADb,EACsB;AACrBI,QAAAA,QAAQ,EAAEF,IAAI,CAACE,QADM;AAErBC,QAAAA,QAAQ,EAAEH,IAAI,CAACG;AAFM,OADtB,EAKFC,IALE,CAKG,KAAKC,cALR,EAMFD,IANE,CAMG,UAAAE,QAAQ,EAAI;AACd,YAAIA,QAAQ,CAACC,IAAT,CAAcC,WAAlB,EAA+B;AAC3BC,UAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,gBAAeJ,QAAQ,CAACC,IAAxB,CAA7B;AACH;;AAED,eAAOD,QAAQ,CAACC,IAAhB;AACH,OAZE,CAAP;AAaH;;;6BAEQ;AACLE,MAAAA,YAAY,CAACE,UAAb,CAAwB,MAAxB;AACH;;;6BAEQX,I,EAAM;AACX,aAAOH,KAAK,CACPI,IADE,CACGH,OAAO,GAAG,UADb,EACyB;AACxBI,QAAAA,QAAQ,EAAEF,IAAI,CAACE,QADS;AAExBU,QAAAA,KAAK,EAAEZ,IAAI,CAACY,KAFY;AAGxBT,QAAAA,QAAQ,EAAEH,IAAI,CAACG;AAHS,OADzB,CAAP;AAMH;;;mCAEcG,Q,EAAU;AACrB,UAAIA,QAAQ,CAACO,MAAT,KAAoB,GAAxB,EAA6B;AACzB,aAAKC,MAAL;AACAC,QAAAA,QAAQ,CAACC,MAAT,CAAgB,IAAhB;AAEA,YAAMC,KAAK,GAAGX,QAAQ,CAACC,IAAT,IAAiBD,QAAQ,CAACC,IAAT,CAAcW,OAA7C;AACA,eAAO,SAAQC,MAAR,CAAeF,KAAf,CAAP;AACH;;AAED,aAAO,SAAQG,OAAR,CAAgBd,QAAhB,CAAP;AACH;;;;;;AAGL,eAAe,IAAIP,WAAJ,EAAf","sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:8081/api/auth/';\r\n\r\nclass AuthService {\r\n    login(user) {\r\n        return axios\r\n            .post(API_URL + 'login', {\r\n                username: user.username,\r\n                password: user.password\r\n            })\r\n            .then(this.handleResponse)\r\n            .then(response => {\r\n                if (response.data.accessToken) {\r\n                    localStorage.setItem('user', JSON.stringify(response.data));\r\n                }\r\n\r\n                return response.data;\r\n            });\r\n    }\r\n\r\n    logout() {\r\n        localStorage.removeItem('user');\r\n    }\r\n\r\n    register(user) {\r\n        return axios\r\n            .post(API_URL + 'register', {\r\n                username: user.username,\r\n                email: user.email,\r\n                password: user.password\r\n            });\r\n    }\r\n\r\n    handleResponse(response) {\r\n        if (response.status === 401) {\r\n            this.logout();\r\n            location.reload(true);\r\n\r\n            const error = response.data && response.data.message;\r\n            return Promise.reject(error);\r\n        }\r\n\r\n        return Promise.resolve(response);\r\n    }\r\n}\r\n\r\nexport default new AuthService();"]}]}